{{ $nav := resources.Get "js/nav.js" }}
{{ $navPublic := $nav | resources.Minify | resources.Fingerprint }}
<script src="{{ $navPublic.Permalink }}"></script>

<script src="/assets/js/tinyslider.js"></script>

<script>
    // slider init
    var sliderControlsContainer = document.querySelector('.slider__controls');
    var slider = tns({
        container: '.slider__list',
        items: 1,
        gutter: 10,
        arrowKeys: true,
        mouseDrag: true,
        controlsContainer: sliderControlsContainer,
        responsive: {
            480: {
                items: 2,
                gutter: 20
            },
            768: {
                items: 3
            },
            1280: {
                gutter: 40
            },
            1600: {
                items: 4
            }
          }
    });
</script>

<script>
// add target blank to archives link
var navLinks = document.querySelectorAll('.site-nav__link');
for (var i=0; i < navLinks.length; i++) {
    if (navLinks[i].innerText == 'Archives') {
        navLinks[i].setAttribute('target', '_blank');
        navLinks[i].setAttribute('rel', 'noopener');
    }
}
</script>


{{ if eq .Params.class "numero-en-cours" }}
    {{ $tabs := resources.Get "js/tabs.js" }}
    {{ $tabsPublic := $tabs | resources.Minify | resources.Fingerprint }}
    <script src="{{ $tabsPublic.Permalink }}"></script>
    <script>
        // other slider init
        var numeroSliderControlsContainer = document.querySelector('.slider__controls');
        var numeroSlider = tns({
            container: '.numero-slider',
            items: 1,
            gutter: 10,
            arrowKeys: true,
            mouseDrag: true,
            controlsContainer: numeroSliderControlsContainer,
            responsive: {
                480: {
                    gutter: 20
                },
                768: {
                    items:2
                },
                1280: {
                    gutter: 40
                },
                1600: {
                    items: 3
                }
            }
        });
    </script>
{{ end }}

{{ if or (.IsHome) (eq .Params.class "numero-en-cours") }}
<script>
    // Cover hover 
    var coverEl = document.getElementById('cover');
    coverEl.onmouseenter = function () {
        coverEl.src = "{{ .Site.Params.cloudinary_url }}f_auto,q_80,w_673/" + backcover;
    }
    coverEl.onmouseleave = function () {
        coverEl.src = "{{ .Site.Params.cloudinary_url }}f_auto,q_80,w_673/" + cover;
    }
</script>
{{ end }}

<script type="text/javascript">
    if(/MSIE \d|Trident.*rv:/.test(navigator.userAgent)) {
        document.write('<script src="/assets/js/css-vars-ponyfill.js"><\/script>');
        // Default values
        cssVars({
            // Targets
            rootElement   : document,
            shadowDOM     : false,
        
            // Sources
            include       : 'link[rel=stylesheet],style',
            exclude       : '',
            variables     : {},
        
            // Options
            onlyLegacy    : true,
            preserveStatic: true,
            preserveVars  : false,
            silent        : false,
            updateDOM     : true,
            updateURLs    : true,
            watch         : false
        });
    }
</script>